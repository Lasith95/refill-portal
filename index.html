<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Refill Reserve | Portal</title>
    
    <link rel="manifest" href="manifest.json">
    <link rel="apple-touch-icon" href="logo.png">
    <link rel="icon" type="image/png" href="logo.png">
    <meta name="theme-color" content="#0f1113">
    <meta name="apple-mobile-web-app-capable" content="yes">

    <style>
        :root {
            --bg-body: #0f1113; --bg-card: #1c1f22; --accent: #d4af37;
            --text-primary: #ffffff; --text-secondary: #a0a0a0;
        }
        body { font-family: sans-serif; background: var(--bg-body); color: white; margin: 0; padding: 20px; }
        #splash-screen { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: #000; display: flex; justify-content: center; align-items: center; z-index: 100; transition: 0.5s; }
        .recipe-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 20px; margin-top: 20px; }
        .card { background: var(--bg-card); padding: 20px; border-radius: 8px; border: 1px solid #333; }
        .tab-btn { background: none; border: 1px solid var(--accent); color: var(--accent); padding: 10px; margin-right: 5px; cursor: pointer; }
        .active { background: var(--accent); color: black; }
        header h1 { letter-spacing: 5px; color: var(--accent); text-align: center; font-size: 1.2rem; }
    </style>
</head>
<body>

<div id="splash-screen"><img src="logo.png" width="80"></div>

<header><h1>REFILL RESERVE</h1></header>

<div id="main-content">
    <div class="nav-tabs">
        <button class="tab-btn active" onclick="render('recipes')">Recipes</button>
        <button class="tab-btn" onclick="render('contacts')">Contacts</button>
    </div>
    <div class="recipe-grid" id="contentGrid">Loading data...</div>
</div>

<script>
    // PASTE YOUR NEW GOOGLE URL BELOW
    const API_URL = 'https://script.google.com/macros/s/AKfycbyH2mfDCkcp6-YhonC9ojx8V38wOZEtQxr0VeCNsHbY0ZLvTu9biO_pZ49rsYpYtDe0/exec'; 
    let db = { recipes: [], contacts: [] };

    async function loadData() {
        try {
            const res = await fetch(API_URL);
            db = await res.json();
            document.getElementById('splash-screen').style.opacity = '0';
            setTimeout(() => document.getElementById('splash-screen').style.display='none', 500);
            render('recipes');
        } catch (e) {
            document.getElementById('contentGrid').innerText = "Error loading. Check your URL.";
        }
    }

    function render(type) {
        const grid = document.getElementById('contentGrid');
        grid.innerHTML = '';
        if(type === 'recipes') {
            db.recipes.forEach(r => {
                grid.innerHTML += `<div class="card"><h3>${r.name}</h3><p>${r.ing}</p></div>`;
            });
        } else {
            db.contacts.forEach(c => {
                grid.innerHTML += `<div class="card"><h3>${c.name}</h3><p>${c.role}</p><a href="tel:${c.phone}" style="color:var(--accent)">${c.phone}</a></div>`;
            });
        }
    }

    window.onload = loadData;
</script>
</body>
</html>
